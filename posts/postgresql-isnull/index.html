<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>11 Lessons to learn when using NULLs in PostgreSQL® | ftisiot ideas about tech, food and life</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="11 Lessons to learn when using NULLs in PostgreSQL®">
    <meta name="generator" content="Hugo 0.140.2">
    
    
    
    
      <meta name="robots" content="index, follow">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.a03a2cf301cbc4fa2ae1ac6ef09edbef3a97d43fbc489850616c0c9fdaac6b38.css" >



    

    
      

    

    

    
      <link rel="canonical" href="https://ftisiot.net/posts/postgresql-isnull/">
    

    <meta property="og:url" content="https://ftisiot.net/posts/postgresql-isnull/">
  <meta property="og:site_name" content="ftisiot ideas about tech, food and life">
  <meta property="og:title" content="11 Lessons to learn when using NULLs in PostgreSQL®">
  <meta property="og:description" content="11 Lessons to learn when using NULLs in PostgreSQL®">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-28T08:00:29+01:00">
    <meta property="article:modified_time" content="2024-02-28T08:00:29+01:00">

  <meta itemprop="name" content="11 Lessons to learn when using NULLs in PostgreSQL®">
  <meta itemprop="description" content="11 Lessons to learn when using NULLs in PostgreSQL®">
  <meta itemprop="datePublished" content="2024-02-28T08:00:29+01:00">
  <meta itemprop="dateModified" content="2024-02-28T08:00:29+01:00">
  <meta itemprop="wordCount" content="3220">
  <meta itemprop="keywords" content="PostgreSQL,SQL,Isnull,Coalesce">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="11 Lessons to learn when using NULLs in PostgreSQL®">
  <meta name="twitter:description" content="11 Lessons to learn when using NULLs in PostgreSQL®">

      
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-7Z74BTZ0TM"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-7Z74BTZ0TM');
        }
      </script>
    
	
  </head>

  <body class="ma0 avenir bg-near-white production">

    
   
  

  
  <header class="cover bg-top" style="background-image: url('https://ftisiot.net/images/2024/isnull.png');">
    <div class="bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        ftisiot ideas about tech, food and life
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/who" title="about page">
              about
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/suggestions-verona" title="suggestions page">
              suggestions
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/postgresqljson/main" title="json-pg page">
              json-pg
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/mysqljson/main" title="json-mysql page">
              json-mysql
            </a>
          </li>
          
        </ul>
      
      
<div class="ananke-socials">
  
    
    <a href="https://twitter.com/FTisiot" target="_blank" rel="noopener" class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" aria-label="follow on Twitter——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
    
    <a href="https://github.com/ftisiot" target="_blank" rel="noopener" class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" aria-label="follow on GitHub——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
    
    <a href="https://www.linkedin.com/in/francescotisiot/" target="_blank" rel="noopener" class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" aria-label="follow on LinkedIn——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
    
    <a href="https://www.youtube.com/channel/UCTJ4oA3-T3RdmM2OJ7d8cJg" target="_blank" rel="noopener" class="youtube ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="YouTube link" aria-label="follow on YouTube——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M42.527,41.34c-0.278,0-0.478,0.078-0.6,0.244  c-0.121,0.156-0.18,0.424-0.18,0.796v0.896h1.543V42.38c0-0.372-0.062-0.64-0.185-0.796C42.989,41.418,42.792,41.34,42.527,41.34z   M36.509,41.309c0.234,0,0.417,0.076,0.544,0.23c0.123,0.155,0.185,0.383,0.185,0.682v4.584c0,0.286-0.053,0.487-0.153,0.611  c-0.1,0.127-0.256,0.189-0.47,0.189c-0.148,0-0.287-0.033-0.421-0.096c-0.135-0.062-0.274-0.171-0.415-0.313v-5.531  c0.119-0.122,0.239-0.213,0.36-0.271C36.26,41.335,36.383,41.309,36.509,41.309z M41.748,44.658v1.672  c0,0.468,0.057,0.792,0.17,0.974c0.118,0.181,0.313,0.269,0.592,0.269c0.289,0,0.491-0.076,0.606-0.229  c0.114-0.153,0.175-0.489,0.175-1.013v-0.405h1.795v0.456c0,0.911-0.217,1.596-0.657,2.059c-0.435,0.459-1.089,0.687-1.958,0.687  c-0.781,0-1.398-0.242-1.847-0.731c-0.448-0.486-0.676-1.157-0.676-2.014v-3.986c0-0.768,0.249-1.398,0.742-1.882  c0.493-0.484,1.128-0.727,1.911-0.727c0.799,0,1.413,0.225,1.843,0.674c0.429,0.448,0.642,1.093,0.642,1.935v2.264H41.748z   M38.623,48.495c-0.271,0.336-0.669,0.501-1.187,0.501c-0.343,0-0.646-0.062-0.912-0.192c-0.267-0.129-0.519-0.327-0.746-0.601  v0.681h-1.764V36.852h1.764v3.875c0.237-0.27,0.485-0.478,0.748-0.616c0.267-0.143,0.534-0.212,0.805-0.212  c0.554,0,0.975,0.189,1.265,0.565c0.294,0.379,0.438,0.933,0.438,1.66v4.926C39.034,47.678,38.897,48.159,38.623,48.495z   M30.958,48.884v-0.976c-0.325,0.361-0.658,0.636-1.009,0.822c-0.349,0.191-0.686,0.282-1.014,0.282  c-0.405,0-0.705-0.129-0.913-0.396c-0.201-0.266-0.305-0.658-0.305-1.189v-7.422h1.744v6.809c0,0.211,0.037,0.362,0.107,0.457  c0.077,0.095,0.196,0.141,0.358,0.141c0.128,0,0.292-0.062,0.488-0.188c0.197-0.125,0.375-0.283,0.542-0.475v-6.744h1.744v8.878  H30.958z M24.916,38.6v10.284h-1.968V38.6h-2.034v-1.748h6.036V38.6H24.916z M32.994,32.978c0-0.001,12.08,0.018,13.514,1.45  c1.439,1.435,1.455,8.514,1.455,8.555c0,0-0.012,7.117-1.455,8.556C45.074,52.969,32.994,53,32.994,53s-12.079-0.031-13.516-1.462  c-1.438-1.435-1.441-8.502-1.441-8.556c0-0.041,0.004-7.12,1.441-8.555C20.916,32.996,32.994,32.977,32.994,32.978z M42.52,29.255  h-1.966v-1.08c-0.358,0.397-0.736,0.703-1.13,0.909c-0.392,0.208-0.771,0.312-1.14,0.312c-0.458,0-0.797-0.146-1.027-0.437  c-0.229-0.291-0.345-0.727-0.345-1.311v-8.172h1.962v7.497c0,0.231,0.045,0.399,0.127,0.502c0.08,0.104,0.216,0.156,0.399,0.156  c0.143,0,0.327-0.069,0.548-0.206c0.22-0.137,0.423-0.312,0.605-0.527v-7.422h1.966V29.255z M31.847,27.588  c0.139,0.147,0.339,0.219,0.6,0.219c0.266,0,0.476-0.075,0.634-0.223c0.157-0.152,0.235-0.358,0.235-0.618v-5.327  c0-0.214-0.08-0.387-0.241-0.519c-0.16-0.131-0.37-0.196-0.628-0.196c-0.241,0-0.435,0.065-0.586,0.196  c-0.148,0.132-0.225,0.305-0.225,0.519v5.327C31.636,27.233,31.708,27.439,31.847,27.588z M30.408,19.903  c0.528-0.449,1.241-0.674,2.132-0.674c0.812,0,1.48,0.237,2.001,0.711c0.517,0.473,0.777,1.083,0.777,1.828v5.051  c0,0.836-0.255,1.491-0.762,1.968c-0.513,0.476-1.212,0.714-2.106,0.714c-0.858,0-1.547-0.246-2.064-0.736  c-0.513-0.492-0.772-1.152-0.772-1.983v-5.068C29.613,20.954,29.877,20.351,30.408,19.903z M24.262,16h-2.229l2.634,8.003v5.252  h2.213v-5.5L29.454,16h-2.25l-1.366,5.298h-0.139L24.262,16z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30  S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
    
    <a href="https://hachyderm.io/@ftisiot" target="_blank" rel="noopener" class="mastodon ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Mastodon link" aria-label="follow on Mastodon——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="M 61.731833,16.783448 C 60.855064,10.336694 55.17491,5.2562169 48.441526,4.2717554 47.305526,4.1054038 43.001372,3.5 33.030833,3.5 h -0.07446 C 22.983141,3.5 20.843449,4.1054038 19.707449,4.2717554 13.161526,5.2289477 7.1836569,9.7940169 5.7332999,16.317063 c -0.6976035,3.212462 -0.7720515,6.774 -0.6424569,10.041 0.1847407,4.685077 0.2205861,9.361923 0.6507292,14.027923 0.2973693,3.099385 0.8161231,6.174077 1.552377,9.201 1.3786615,5.590462 6.9594998,10.242769 12.4272688,12.140846 5.854077,1.979385 12.149615,2.307923 18.181846,0.949 0.663539,-0.152692 1.319846,-0.33 1.968693,-0.531769 1.464153,-0.460846 3.182,-0.976308 4.444846,-1.881692 0.01731,-0.01269 0.03154,-0.02908 0.04154,-0.048 0.01,-0.01885 0.01562,-0.03977 0.01631,-0.06108 v -4.521385 c -3.08e-4,-0.01992 -0.0051,-0.03954 -0.014,-0.05738 -0.009,-0.01785 -0.02185,-0.03354 -0.03777,-0.04577 -0.01585,-0.01231 -0.03431,-0.02092 -0.05392,-0.02531 -0.01969,-0.0043 -0.04008,-0.0042 -0.05969,2.3e-4 -3.864769,0.913077 -7.825154,1.370769 -11.798615,1.363539 -6.838154,0 -8.677308,-3.209693 -9.204,-4.546 -0.423308,-1.154846 -0.692154,-2.359462 -0.799615,-3.583308 -0.0011,-0.02054 0.0028,-0.04108 0.01115,-0.05992 0.0084,-0.01877 0.02123,-0.03538 0.03731,-0.04839 0.01615,-0.013 0.03515,-0.02208 0.05546,-0.02646 0.02031,-0.0045 0.04138,-0.004 0.06154,0.0012 3.800385,0.906846 7.696154,1.364538 11.605615,1.363538 0.940231,0 1.877693,0 2.818,-0.02454 3.931923,-0.109077 8.076154,-0.308154 11.944693,-1.055385 0.09654,-0.01908 0.193,-0.03546 0.275769,-0.06 6.101923,-1.159 11.908846,-4.796846 12.498923,-14.008846 0.02208,-0.362692 0.07723,-3.798769 0.07723,-4.175077 0.0028,-1.279 0.416384,-9.072846 -0.06069,-13.861538 z m -9.391461,22.98623 H 45.924141 V 24.225525 c 0,-3.272462 -1.378692,-4.941385 -4.182923,-4.941385 -3.082692,0 -4.626769,1.974385 -4.626769,5.874 v 8.508385 H 30.736757 V 25.15814 c 0,-3.899615 -1.546847,-5.874 -4.629539,-5.874 -2.787692,0 -4.180154,1.668923 -4.182923,4.941385 V 39.769678 H 15.513526 V 23.753755 c 0,-3.272461 0.844692,-5.87223 2.534,-7.799384 1.742615,-1.922539 4.028461,-2.909693 6.865769,-2.909693 3.283923,0 5.765538,1.248923 7.419923,3.744231 l 1.596539,2.650692 1.59923,-2.650692 c 1.654385,-2.495308 4.136,-3.744231 7.414462,-3.744231 2.834538,0 5.120308,0.987154 6.868461,2.909693 1.689385,1.925307 2.534,4.525077 2.534,7.799384 z"  style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
</div>

    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        
          <div class="f2 f1-l fw2 white-90 mb0 lh-title">11 Lessons to learn when using NULLs in PostgreSQL®</div>
          
            <div class="fw1 f5 f3-l white-80 measure-wide-l center lh-copy mt3 mb4">
              11 Lessons to learn when using NULLs in PostgreSQL®
            </div>
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
      
      <a href="https://twitter.com/intent/tweet?url=https://ftisiot.net/posts/postgresql-isnull/&amp;text=11%20Lessons%20to%20learn%20when%20using%20NULLs%20in%20PostgreSQL%c2%ae" class="ananke-social-link twitter no-underline" aria-label="share on Twitter">
        
        <span class="icon"> <svg style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>
</span>
        
      </a>
    
      
      <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://ftisiot.net/posts/postgresql-isnull/&amp;title=11%20Lessons%20to%20learn%20when%20using%20NULLs%20in%20PostgreSQL%c2%ae" class="ananke-social-link linkedin no-underline" aria-label="share on LinkedIn">
        
        <span class="icon"> <svg style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span>
        
      </a>
    
  </div>


      <h1 class="f1 athelas mt3 mb1">11 Lessons to learn when using NULLs in PostgreSQL®</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2024-02-28T08:00:29+01:00">February 28, 2024</time>
      

      
      
        <span class="f6 mv4 dib tracked"> - 16 minutes read </span>
        <span class="f6 mv4 dib tracked"> - 3220 words </span>
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>A boolean value should only contain two values, <code>True</code> or <code>False</code>, but is it correct? Usually people assume so, but sometimes miss the fact that there could be the <strong>absence</strong> of the value all-together. In databases this is absence is usually stored as <code>NULL</code> and this blog showcases how to find them, use them properly and 11 lessons to learn to be a <code>NULL</code> Pro!</p>
<blockquote>
<p>Keep in mind, it&rsquo;s not only booleans that can contain <code>NULL</code> values, it&rsquo;s all the columns where you don&rsquo;t define a <code>NOT NULL</code> constraint!</p>
</blockquote>

<p> <p style="background: #C1E1C1;border: 2px solid #b4d3b2;border-radius: 15px;text-align: center;">👉 Want a FREE PostgreSQL database?👈<br>🦀 Check <a href="https://go.aiven.io/francesco-signup">Aiven&rsquo;s FREE plans</a>! 🦀 </p></p>
<p style="background: #ffdfba;border: 2px solid #FFAC1C;border-radius: 15px;text-align: center;">
⚡️ Want to optimize your SQL query with AI? ⚡️ <br>
Check  <a href="https://go.aiven.io/ft-sql-query-optimizer">Aiven SQL Query Optimizer</a>! </p>
<p style="background: #C1E1C1;border: 2px solid #b4d3b2;border-radius: 15px;text-align: center;">
⚡️ Want a Fully PostgreSQL optimized Database? ⚡️ <br>
Check  <a href="https://go.aiven.io/ft-ai-db-optimizer">Aiven AI Database Optimizer</a>! <br><font size=1>Powered by EverSQL, it provides you index and SQL rewrite recommendations to take your database performance to the next level</font>
</p>

<h2 id="it-all-starts-with-some-columns-and-rows">It all starts with some columns and rows</h2>
<p>Let&rsquo;s start from the basics: you have a PostgreSQL® database and a table, called <code>users</code> like:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">CREATE</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TABLE</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>id<span style="color:#bbb"> </span><span style="color:#008000">SERIAL</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>username<span style="color:#bbb"> </span><span style="color:#008000">TEXT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">PRIMARY</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">KEY</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>name<span style="color:#bbb"> </span><span style="color:#008000">TEXT</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>surname<span style="color:#bbb"> </span><span style="color:#008000">TEXT</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>age<span style="color:#bbb"> </span><span style="color:#008000">INT</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>);<span style="color:#bbb">
</span></span></span></code></pre></div><blockquote>
<p>Hey, do you want to test the above code but not having a PostgreSQL database handy? Past your code in <a href="https://pgplayground.com/?utm_medium=organic&amp;utm_source=ext_blog&amp;utm_content=ftisiotNULL">PostgreSQL Playground</a> and quickly check the results!</p>
</blockquote>
<p>Let&rsquo;s insert some data:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">INSERT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">INTO</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span>(username,<span style="color:#bbb"> </span>name,<span style="color:#bbb"> </span>surname,<span style="color:#bbb"> </span>age)<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">VALUES</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#ba2121">&#39;jdoe&#39;</span>,<span style="color:#bbb"> </span><span style="color:#ba2121">&#39;Jon&#39;</span>,<span style="color:#bbb"> </span><span style="color:#ba2121">&#39;Doe&#39;</span>,<span style="color:#bbb"> </span><span style="color:#666">25</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#ba2121">&#39;lspencer&#39;</span>,<span style="color:#ba2121">&#39;Liz&#39;</span>,<span style="color:#bbb"> </span><span style="color:#ba2121">&#39;Spencer&#39;</span>,<span style="color:#bbb"> </span><span style="color:#666">35</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#ba2121">&#39;hlondon&#39;</span>,<span style="color:#ba2121">&#39;Hanna&#39;</span>,<span style="color:#bbb"> </span><span style="color:#ba2121">&#39;London&#39;</span>,<span style="color:#bbb"> </span><span style="color:#666">45</span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>Querying the data showcases the table with all the columns filled.</p>
<pre tabindex="0"><code> id | username | name  | surname | age 
----+----------+-------+---------+-----
  1 | jdoe     | Jon   | Doe     |  25
  2 | lspencer | Liz   | Spencer |  35
  3 | hlondon  | Hanna | London  |  45
(3 rows)
</code></pre><h2 id="insert-nulls">Insert NULLs</h2>
<p>Now, let&rsquo;s check if we can insert some <code>NULL</code>s, let&rsquo;s try by inserting them in the <code>name</code>, <code>surname</code> and <code>age</code> columns:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">INSERT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">INTO</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span>(username,<span style="color:#bbb"> </span>name,<span style="color:#bbb"> </span>surname,<span style="color:#bbb"> </span>age)<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">VALUES</span><span style="color:#bbb"> </span>(<span style="color:#ba2121">&#39;test&#39;</span>,<span style="color:#008000;font-weight:bold">NULL</span>,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NULL</span>,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NULL</span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>This works since we don&rsquo;t have any constraint</p>
<pre tabindex="0"><code> id | username | name  | surname | age 
----+----------+-------+---------+-----
  1 | jdoe     | Jon   | Doe     |  25
  2 | lspencer | Liz   | Spencer |  35
  3 | hlondon  | Hanna | London  |  45
  4 | test     |       |         |    
(4 rows)
</code></pre><p>We can even simplify the insert with the same effect</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">INSERT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">INTO</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span>(username)<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">VALUES</span><span style="color:#bbb"> </span>(<span style="color:#ba2121">&#39;test1&#39;</span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>Result:</p>
<pre tabindex="0"><code> id | username | name  | surname | age 
----+----------+-------+---------+-----
  1 | jdoe     | Jon   | Doe     |  25
  2 | lspencer | Liz   | Spencer |  35
  3 | hlondon  | Hanna | London  |  45
  4 | test     |       |         |    
  5 | test1    |       |         |    
(5 rows)
</code></pre><h2 id="inserting-nulls">Inserting NULLs</h2>
<p>The first step to avoid <code>NULL</code>s from appearing in a table is to forbid inserting them. The section below showcases a few situations on how to avoid inserting <code>NULL</code>s in new and existing columns.</p>
<h3 id="inserting-nulls-in-the-primary-key">Inserting NULLs in the primary key</h3>
<p>Can I insert a <code>NULL</code> in the table primary key? In theory this could be allowed since there&rsquo;s no explicit <code>NOT NULL</code> constraint on the column. Let&rsquo;s try:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">INSERT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">INTO</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span>(username)<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">VALUES</span><span style="color:#bbb"> </span>(<span style="color:#008000;font-weight:bold">NULL</span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>However this fails with:</p>
<pre tabindex="0"><code>ERROR:  null value in column &#34;username&#34; of relation &#34;users&#34; violates not-null constraint
DETAIL:  Failing row contains (6, null, null, null, null).
</code></pre><p><strong>💡 Lesson 1 💡</strong>: Primary Keys are by default <code>NOT NULL</code></p>
<h3 id="create-a-new-column-with-not-null-constraint">Create a new column with NOT NULL constraint</h3>
<p>Let&rsquo;s add a new column to our table:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TABLE</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">ADD</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">COLUMN</span><span style="color:#bbb"> </span>points<span style="color:#bbb"> </span><span style="color:#008000">INT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NOT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NULL</span>;<span style="color:#bbb">
</span></span></span></code></pre></div><p>This will fail, since the previously inserted data don&rsquo;t have any associated value for <code>points</code></p>
<pre tabindex="0"><code>ERROR:  column &#34;points&#34; of relation &#34;users&#34; contains null values
</code></pre><p>Let&rsquo;s add a default value with:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TABLE</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">ADD</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">COLUMN</span><span style="color:#bbb"> </span>points<span style="color:#bbb"> </span><span style="color:#008000">INT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#666">0</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NOT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NULL</span>;<span style="color:#bbb">
</span></span></span></code></pre></div><p>The table was altered, and now contains <code>0 points</code> for all the existing rows.</p>
<pre tabindex="0"><code> id | username | name  | surname | age | points 
----+----------+-------+---------+-----+--------
  1 | jdoe     | Jon   | Doe     |  25 |      0
  2 | lspencer | Liz   | Spencer |  35 |      0
  3 | hlondon  | Hanna | London  |  45 |      0
  4 | test     |       |         |     |      0
  5 | test1    |       |         |     |      0
(5 rows)
</code></pre><p>If we try to insert a new row without specifying the <code>points</code> column:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">INSERT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">INTO</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span>(username)<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">VALUES</span><span style="color:#bbb"> </span>(<span style="color:#ba2121">&#39;usrwithnullpoints&#39;</span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>The row is inserted with the default <code>0 points</code></p>
<pre tabindex="0"><code> id |     username      | name  | surname | age | points 
----+-------------------+-------+---------+-----+--------
  1 | jdoe              | Jon   | Doe     |  25 |      0
  2 | lspencer          | Liz   | Spencer |  35 |      0
  3 | hlondon           | Hanna | London  |  45 |      0
  4 | test              |       |         |     |      0
  5 | test1             |       |         |     |      0
  7 | usrwithnullpoints |       |         |     |      0
(6 rows)
</code></pre><p>What if we try to push a <code>NULL</code> into <code>points</code>?</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">INSERT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">INTO</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span>(username,<span style="color:#bbb"> </span>points)<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">VALUES</span><span style="color:#bbb"> </span>(<span style="color:#ba2121">&#39;forcenullpoints&#39;</span>,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NULL</span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>We get the <code>ERROR:  null value in column &quot;points&quot; of relation &quot;users&quot; violates not-null constraint</code> stating that our insert is violating the <code>NOT NULL</code> constraint.</p>
<p><strong>💡 Lesson 2 💡</strong>: Setting a <code>NOT NULL</code> constraint doesn&rsquo;t allow inserting <code>NULL</code>s</p>
<p><strong>💡 Lesson 3 💡</strong>: If we want to add a <code>NOT NULL</code> column to an existing table with data, we need to specify the <strong>default</strong> value for existing rows.</p>
<h3 id="add-a-not-null-constraint-to-an-existing-column">Add a NOT NULL constraint to an existing column</h3>
<p>If we try to change an existing column (e.g. <code>name</code>) to add the <code>NOT NULL</code> constraint:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TABLE</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">COLUMN</span><span style="color:#bbb"> </span>name<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">SET</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NOT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NULL</span>;<span style="color:#bbb">
</span></span></span></code></pre></div><p>We get the similar error <code>ERROR:  column &quot;name&quot; of relation &quot;users&quot; contains null values</code>, therefore we need also need to amend the current <code>NULL</code> values (and possibly set a default)</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TABLE</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">COLUMN</span><span style="color:#bbb"> </span>name<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TYPE</span><span style="color:#bbb"> </span><span style="color:#008000">TEXT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">USING</span><span style="color:#bbb"> </span>(COALESCE(name,<span style="color:#bbb"> </span><span style="color:#ba2121">&#39;Hugo&#39;</span>)),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">COLUMN</span><span style="color:#bbb"> </span>name<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">SET</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;Hugo&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">COLUMN</span><span style="color:#bbb"> </span>name<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">SET</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NOT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NULL</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>;<span style="color:#bbb">
</span></span></span></code></pre></div><p>In the above we:</p>
<ul>
<li>Altered the type, setting it to <code>TEXT</code> again, to apply the function <code>COALESCE(name, 'Hugo')</code> which is replacing <code>NULL</code>s in the <code>name</code> field with <code>Hugo</code></li>
<li>Set the default value for the <code>name</code> column to <code>Hugo</code> &lt;- This is not strictly necessary</li>
<li>Applied the <code>NOT NULL</code> constraint since we don&rsquo;t have any <code>NULL</code> values anymore</li>
</ul>
<blockquote>
<p>Note: the above method locks the entire table until done. A faster approach could be to split the <code>COALESCE(name, 'Hugo')</code> into a dedicated update and then only perform the <code>NOT NULL</code> and <code>DEFAULT</code> settings on the <code>ALTER TABLE</code> statement.</p>
</blockquote>
<p>The results are in line with the expected, no <code>NULL</code>s in the <code>name</code> column, being replaced by <code>Hugo</code></p>
<pre tabindex="0"><code> id |     username      | name  | surname | age | points 
----+-------------------+-------+---------+-----+--------
  1 | jdoe              | Jon   | Doe     |  25 |      0
  2 | lspencer          | Liz   | Spencer |  35 |      0
  3 | hlondon           | Hanna | London  |  45 |      0
  4 | test              | Hugo  |         |     |      0
  5 | test1             | Hugo  |         |     |      0
  7 | usrwithnullpoints | Hugo  |         |     |      0
(6 rows)
</code></pre><p><strong>💡 Lesson 4 💡</strong>: If we need to add a <code>NOT NULL</code> column to an existing column in a table, we need to amend the existing <code>NULL</code> values and optionally set the <strong>default</strong> value for incoming rows.</p>
<p>What if I want to <strong>remove</strong> the <code>NOT NULL</code> constraint? We can do it with:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TABLE</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">COLUMN</span><span style="color:#bbb"> </span>name<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">DROP</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NOT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NULL</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>;<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="is-default-enough">Is DEFAULT enough?</h3>
<p>What if we leave the <code>NOT NULL</code> constraint aside, and just set the <code>DEFAULT</code>? Let&rsquo;s try with the <code>date_first_login</code> new column</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">ALTER</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TABLE</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">ADD</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">COLUMN</span><span style="color:#bbb"> </span>date_first_login<span style="color:#bbb"> </span><span style="color:#008000">DATE</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">CURRENT_DATE</span>;<span style="color:#bbb">
</span></span></span></code></pre></div><p>Checking what&rsquo;s in the table, we see all the <code>date_first_login</code> filled</p>
<pre tabindex="0"><code> id |     username      | name  | surname | age | points | date_first_login 
----+-------------------+-------+---------+-----+--------+------------------
  1 | jdoe              | Jon   | Doe     |  25 |      0 | 2024-02-27
  2 | lspencer          | Liz   | Spencer |  35 |      0 | 2024-02-27
  3 | hlondon           | Hanna | London  |  45 |      0 | 2024-02-27
  4 | test              | Hugo  |         |     |      0 | 2024-02-27
  5 | test1             | Hugo  |         |     |      0 | 2024-02-27
  7 | usrwithnullpoints | Hugo  |         |     |      0 | 2024-02-27
(6 rows)
</code></pre><p>If we try to insert a new row, without specifying the <code>date_first_login</code>, it&rsquo;s correctly assigned to today</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">INSERT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">INTO</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span>(username)<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">VALUES</span><span style="color:#bbb"> </span>(<span style="color:#ba2121">&#39;user_with_no_date_first_login&#39;</span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>The above is correctly inserted with a not null <code>date_first_login</code></p>
<pre tabindex="0"><code> id |           username            | name  | surname | age | points | date_first_login 
----+-------------------------------+-------+---------+-----+--------+------------------
  1 | jdoe                          | Jon   | Doe     |  25 |      0 | 2024-02-27
  2 | lspencer                      | Liz   | Spencer |  35 |      0 | 2024-02-27
  3 | hlondon                       | Hanna | London  |  45 |      0 | 2024-02-27
  4 | test                          | Hugo  |         |     |      0 | 2024-02-27
  5 | test1                         | Hugo  |         |     |      0 | 2024-02-27
  7 | usrwithnullpoints             | Hugo  |         |     |      0 | 2024-02-27
  9 | user_with_no_date_first_login | Hugo  |         |     |      0 | 2024-02-27
(7 rows)
</code></pre><p>So&hellip; is the <code>NOT NULL</code> constraint really needed? The reply is <strong>YES</strong> since I could insert <code>NULLs</code> by specifying it in the <code>INSERT</code> statement</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">INSERT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">INTO</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span>(username,<span style="color:#bbb"> </span>date_first_login)<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">VALUES</span><span style="color:#bbb"> </span>(<span style="color:#ba2121">&#39;user_with_null_date_first_login&#39;</span>,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NULL</span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>Which will be stored correctly with a <code>NULL</code> value for <code>date_first_login</code></p>
<pre tabindex="0"><code> id |            username             | name  | surname | age | points | date_first_login 
----+---------------------------------+-------+---------+-----+--------+------------------
  1 | jdoe                            | Jon   | Doe     |  25 |      0 | 2024-02-27
  2 | lspencer                        | Liz   | Spencer |  35 |      0 | 2024-02-27
  3 | hlondon                         | Hanna | London  |  45 |      0 | 2024-02-27
  4 | test                            | Hugo  |         |     |      0 | 2024-02-27
  5 | test1                           | Hugo  |         |     |      0 | 2024-02-27
  7 | usrwithnullpoints               | Hugo  |         |     |      0 | 2024-02-27
  9 | user_with_no_date_first_login   | Hugo  |         |     |      0 | 2024-02-27
 10 | user_with_null_date_first_login | Hugo  |         |     |      0 | 
(8 rows)
</code></pre><p><strong>💡 Lesson 5 💡</strong>: The <code>DEFAULT</code> is going to prevent <code>NULL</code>s from being inserted only if the <code>NULL</code> is <strong>NOT</strong> specified in the target column. To enforce the value we need an explicit <code>NOT NULL</code> constraint</p>
<h2 id="querying-nulls">Querying NULLs</h2>
<p>In the above section we tried to avoid storing <code>NULL</code>s in our systems, what if we need to deal with existing <code>NULL</code>s in our column? Here we can use a few SQL functions to detect them and change their value.</p>
<h3 id="detecting-nulls-with-the-is-null-condition">Detecting NULLs with the <code>IS NULL</code> condition</h3>
<p>What if we want to detect the <code>NULL</code> values? We can use the <code>IS NULL</code> condition, for example:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#666">*</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">where</span><span style="color:#bbb"> </span>surname<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">IS</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NULL</span>;<span style="color:#bbb">
</span></span></span></code></pre></div><p>Which will retrieve the list of <code>NULL</code>s surnames</p>
<pre tabindex="0"><code> id |            username             | name | surname | age | points | date_first_login 
----+---------------------------------+------+---------+-----+--------+------------------
  4 | test                            | Hugo |         |     |      0 | 2024-02-27
  5 | test1                           | Hugo |         |     |      0 | 2024-02-27
  7 | usrwithnullpoints               | Hugo |         |     |      0 | 2024-02-27
  9 | user_with_no_date_first_login   | Hugo |         |     |      0 | 2024-02-27
 10 | user_with_null_date_first_login | Hugo |         |     |      0 | 
(5 rows)
</code></pre><p>The opposite list could be retrieved by applying the <code>IS NOT NULL</code> condition:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#666">*</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">where</span><span style="color:#bbb"> </span>surname<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">IS</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NOT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NULL</span>;<span style="color:#bbb">
</span></span></span></code></pre></div><p>Resulting in</p>
<pre tabindex="0"><code> id | username | name  | surname | age | points | date_first_login 
----+----------+-------+---------+-----+--------+------------------
  1 | jdoe     | Jon   | Doe     |  25 |      0 | 2024-02-27
  2 | lspencer | Liz   | Spencer |  35 |      0 | 2024-02-27
  3 | hlondon  | Hanna | London  |  45 |      0 | 2024-02-27
(3 rows)
</code></pre><p>What if I try to use the equal comparison (<code>=</code>)</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#666">*</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">where</span><span style="color:#bbb"> </span>surname<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NULL</span>;<span style="color:#bbb">
</span></span></span></code></pre></div><p>The above retrieves <strong>NO rows</strong> since the <code>NULL</code> value means there is <strong>NO value</strong> and is <strong>NOT</strong> equal to any other value (<code>NULL</code>=<code>NULL</code> is <strong>False</strong>)</p>
<pre tabindex="0"><code> id | username | name | surname | age | points | date_first_login 
----+----------+------+---------+-----+--------+------------------
(0 rows)
</code></pre><p>If we apply the different operator (<code>&lt;&gt;</code>) with <code>NULL</code> we also get back <strong>NO rows</strong>, since the <code>NULL</code> value means there is <strong>NO value</strong>, and therefore is not equal or different to other values.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#666">*</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">where</span><span style="color:#bbb"> </span>surname<span style="color:#bbb"> </span><span style="color:#666">&lt;&gt;</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NULL</span>;<span style="color:#bbb">
</span></span></span></code></pre></div><p><strong>💡 Lesson 6 💡</strong>: To find <code>NULL</code>s we should always use the <code>IS NULL</code>; the <code>IS NOT NULL</code> to fetch the not null rows.</p>
<h3 id="associating-a-default-value-to-nulls-with-coalesce">Associating a default value to NULLs with COALESCE</h3>
<p>In the above we saw how to find <code>NULL</code>s, what if we need to include them in a <code>SELECT</code> statement with other values? We can either add an <code>OR</code> condition like</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#666">*</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">WHERE</span><span style="color:#bbb"> </span>surname<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;London&#39;</span><span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">OR</span><span style="color:#bbb"> </span>surname<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">IS</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">NULL</span>;<span style="color:#bbb">
</span></span></span></code></pre></div><p>Or we can apply a transformation to change the <code>NULL</code>s into a value we can compare</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#666">*</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">WHERE</span><span style="color:#bbb"> </span>COALESCE(surname,<span style="color:#ba2121">&#39;Verona&#39;</span>)<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">in</span><span style="color:#bbb"> </span>(<span style="color:#ba2121">&#39;London&#39;</span>,<span style="color:#bbb"> </span><span style="color:#ba2121">&#39;Verona&#39;</span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>Both will have the same result</p>
<pre tabindex="0"><code> id |            username             | name  | surname | age | points | date_first_login 
----+---------------------------------+-------+---------+-----+--------+------------------
  3 | hlondon                         | Hanna | London  |  45 |      0 | 2024-02-27
  4 | test                            | Hugo  |         |     |      0 | 2024-02-27
  5 | test1                           | Hugo  |         |     |      0 | 2024-02-27
  7 | usrwithnullpoints               | Hugo  |         |     |      0 | 2024-02-27
  9 | user_with_no_date_first_login   | Hugo  |         |     |      0 | 2024-02-27
 10 | user_with_null_date_first_login | Hugo  |         |     |      0 | 
(6 rows)
</code></pre><p>However, if we apply the second option, we must be sure that <code>Verona</code> (the label we associate to <code>NULL</code> values) is a value not present in the column or a value we want to include in our selection.</p>
<p><strong>💡 Lesson 7 💡</strong>: When using <code>COALESCE</code> check out that the value you want to use as substitute of <code>NULL</code> is not already present in the table and outside of your business logic otherwise you might include in the filter more values than expected.</p>
<h3 id="performing-math-on-null-columns">Performing Math on NULL columns</h3>
<p>A similar scenario is due when we need to perform a calculation over a <code>NULL</code>able column. Let&rsquo;s take the example of the <code>age</code> column: what if we want to calculate the average age?</p>
<p>Let&rsquo;s see the data:</p>
<pre tabindex="0"><code> id |            username             | name  | surname | age | points | date_first_login 
----+---------------------------------+-------+---------+-----+--------+------------------
  1 | jdoe                            | Jon   | Doe     |  25 |      0 | 2024-02-27
  2 | lspencer                        | Liz   | Spencer |  35 |      0 | 2024-02-27
  3 | hlondon                         | Hanna | London  |  45 |      0 | 2024-02-27
  4 | test                            | Hugo  |         |     |      0 | 2024-02-27
  5 | test1                           | Hugo  |         |     |      0 | 2024-02-27
  7 | usrwithnullpoints               | Hugo  |         |     |      0 | 2024-02-27
  9 | user_with_no_date_first_login   | Hugo  |         |     |      0 | 2024-02-27
 10 | user_with_null_date_first_login | Hugo  |         |     |      0 | 
(8 rows)
</code></pre><p>We can calculate the average age with:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">select</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">avg</span>(age)<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span>users;<span style="color:#bbb">
</span></span></span></code></pre></div><p>Resulting in <code>35</code> which is the average between the 3 <strong>NOT NULL</strong> ages! Similarly if we count the <code>date_first_login</code>s with:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">select</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">count</span>(date_first_login)<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span>users;<span style="color:#bbb">
</span></span></span></code></pre></div><p>The result is <code>7</code>, one row for every user having a not null <code>date_first_login</code></p>
<p><strong>💡 Lesson 8 💡</strong>: When performing Mathematical operation with nullable columns, only <strong>NOT NULL</strong> values will be elaborated!</p>
<p>What if we try to calculate the average <code>points</code>? First let&rsquo;s update the table to give <code>jdoe</code> 25 points</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">UPDATE</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">set</span><span style="color:#bbb"> </span>points<span style="color:#666">=</span><span style="color:#666">25</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">where</span><span style="color:#bbb"> </span>username<span style="color:#666">=</span><span style="color:#ba2121">&#39;jdoe&#39;</span>;<span style="color:#bbb">
</span></span></span></code></pre></div><p>Now let&rsquo;s calcuate the average points</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">select</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">avg</span>(points)<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span>users;<span style="color:#bbb">
</span></span></span></code></pre></div><p>The result is <code>3.125</code> which is the mathematical average between the <code>25</code> points of <code>jdoe</code> and the <code>0</code> of the rest due to us previously setting <code>0</code> as default value. Is this correct? It depends! If we wanted to calculate the average number of points of users actually playing some games, this could be a misleading calculation.</p>
<p><strong>💡 Lesson 9 💡</strong>: When performing Mathematical operation with nullable columns, the default value of a column will impact the results.</p>
<h3 id="joining-on-null-columns">Joining on NULL columns</h3>
<p>Building on what we explored before about the <code>NULL</code> not being equal or different to any other value, we need to pay closer attention when we deal with nullable columns in join condition.</p>
<p>Let&rsquo;s create another table called <code>sessions</code> and insert some data. For a weird reason, the design of this table will force us to join with <code>users</code> on the <code>surname</code> which is a NULLABLE field.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">CREATE</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">TABLE</span><span style="color:#bbb"> </span>sessions<span style="color:#bbb"> </span>(id<span style="color:#bbb"> </span><span style="color:#008000">serial</span>,<span style="color:#bbb"> </span>surname<span style="color:#bbb"> </span><span style="color:#008000">text</span>,<span style="color:#bbb"> </span>session_time<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">timestamp</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">INSERT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">INTO</span><span style="color:#bbb"> </span>sessions<span style="color:#bbb"> </span>(surname,<span style="color:#bbb"> </span>session_time)<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">values</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#ba2121">&#39;Doe&#39;</span>,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">CURRENT_TIMESTAMP</span><span style="color:#bbb"> </span><span style="color:#666">-</span><span style="color:#bbb"> </span><span style="color:#008000">INTERVAL</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;1 day&#39;</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#ba2121">&#39;Doe&#39;</span>,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">CURRENT_TIMESTAMP</span><span style="color:#bbb"> </span><span style="color:#666">-</span><span style="color:#bbb"> </span><span style="color:#008000">INTERVAL</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;1 day&#39;</span><span style="color:#666">*</span><span style="color:#666">2</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#ba2121">&#39;Spencer&#39;</span>,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">CURRENT_TIMESTAMP</span><span style="color:#bbb"> </span><span style="color:#666">-</span><span style="color:#bbb"> </span><span style="color:#008000">INTERVAL</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;1 day&#39;</span><span style="color:#666">*</span><span style="color:#666">2</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#ba2121">&#39;Spencer&#39;</span>,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">CURRENT_TIMESTAMP</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#008000;font-weight:bold">NULL</span>,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">CURRENT_TIMESTAMP</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#008000;font-weight:bold">NULL</span>,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">CURRENT_TIMESTAMP</span><span style="color:#bbb"> </span><span style="color:#666">-</span><span style="color:#bbb"> </span><span style="color:#008000">INTERVAL</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;1 day&#39;</span><span style="color:#666">*</span><span style="color:#666">2</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#008000;font-weight:bold">NULL</span>,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">CURRENT_TIMESTAMP</span><span style="color:#bbb"> </span><span style="color:#666">-</span><span style="color:#bbb"> </span><span style="color:#008000">INTERVAL</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;1 day&#39;</span><span style="color:#666">*</span><span style="color:#666">2</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#008000;font-weight:bold">NULL</span>,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">CURRENT_TIMESTAMP</span><span style="color:#bbb"> </span><span style="color:#666">-</span><span style="color:#bbb"> </span><span style="color:#008000">INTERVAL</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#39;1 day&#39;</span><span style="color:#666">*</span><span style="color:#666">1</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(<span style="color:#008000;font-weight:bold">NULL</span>,<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">CURRENT_TIMESTAMP</span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>Now, if we want to count users having a session on each day we could think of simply writing the above query:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">EXTRACT</span>(<span style="color:#008000;font-weight:bold">DAY</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>session_time),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">count</span>(<span style="color:#008000;font-weight:bold">distinct</span><span style="color:#bbb"> </span>username)<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>sessions<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">join</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">on</span><span style="color:#bbb"> </span>sessions.surname<span style="color:#666">=</span>users.surname<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">group</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">by</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">EXTRACT</span>(<span style="color:#008000;font-weight:bold">DAY</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>session_time);<span style="color:#bbb">
</span></span></span></code></pre></div><p>However the results shows only the 4 sessions below</p>
<pre tabindex="0"><code> extract | count 
---------+-------
      25 |     2
      26 |     1
      27 |     1
(3 rows)
</code></pre><p>Why? It&rsquo;s again because of <code>NULL</code> values in the join condition. This problem of poor data quality on both ends of the join is stopping us from reporting any useful number. How could we fix it? Well, the fix should be done uphill by setting the <code>sessions</code> table to use the <code>username</code> instead of the <code>surname</code> and defining a proper <code>FOREIGN KEY</code> to the <code>users</code> table.</p>
<p><strong>💡 Lesson 10 💡</strong>: Joining tables on nullable columns without caring about the NULL management will impact the results by reducing the number of rows included in the join.</p>
<p>Still, if we want a simplistic solution, we could do the apply the <code>COALESCE</code> to both sides of the join:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">EXTRACT</span>(<span style="color:#008000;font-weight:bold">DAY</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>session_time),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">count</span>(<span style="color:#008000;font-weight:bold">distinct</span><span style="color:#bbb"> </span>username)<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>sessions<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">join</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">on</span><span style="color:#bbb"> </span>coalesce(sessions.surname,<span style="color:#bbb"> </span><span style="color:#ba2121">&#39;NoSurname&#39;</span>)<span style="color:#666">=</span>coalesce(users.surname,<span style="color:#bbb"> </span><span style="color:#ba2121">&#39;NoSurname&#39;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">group</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">by</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">EXTRACT</span>(<span style="color:#008000;font-weight:bold">DAY</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>session_time);<span style="color:#bbb">
</span></span></span></code></pre></div><p>The result shows an increased count of sessions</p>
<pre tabindex="0"><code> extract | count 
---------+-------
      25 |     7
      26 |     6
      27 |     6
(3 rows)
</code></pre><p>However this is still not the correct answer, since we are seeing <code>19</code> session being aggregated while only <code>9</code> sessions were inserted in the original <code>sessions</code> table. Why is that? It&rsquo;s because we now casted all the <code>NULL</code>s as <code>NoSurname</code> on both sides of the join. Since we had <code>5</code> sessions without <code>surname</code> and <code>5</code> users without <code>surname</code> we are creating a cartesian join of all the empty surnames with the empty sessions.</p>
<p>We had the following users without <code>surname</code></p>
<pre tabindex="0"><code>test
test1
usrwithnullpoints
user_with_no_date_first_login
user_with_null_date_first_login
</code></pre><p>And the following sessions without <code>surname</code></p>
<pre tabindex="0"><code>  6 | 2024-02-27 14:10:08.419021
  7 | 2024-02-25 14:10:08.419021
  8 | 2024-02-25 14:10:08.419021
  9 | 2024-02-26 14:10:08.419021
 10 | 2024-02-27 14:10:08.419021
</code></pre><p>Each of the users was associated with each sessions, creating a overflow of sessions.</p>
<p>A more correct solution, attribuiting all the <code>NULL</code> session to a same phantom user <code>NoUser</code> could be:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">EXTRACT</span>(<span style="color:#008000;font-weight:bold">DAY</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>session_time),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">count</span>(<span style="color:#008000;font-weight:bold">distinct</span><span style="color:#bbb"> </span>coalesce(username,<span style="color:#ba2121">&#39;NoUser&#39;</span>))<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>sessions<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">left</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">outer</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">join</span><span style="color:#bbb"> </span>users<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">on</span><span style="color:#bbb"> </span>sessions.surname<span style="color:#666">=</span>users.surname<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">group</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">by</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">EXTRACT</span>(<span style="color:#008000;font-weight:bold">DAY</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>session_time);<span style="color:#bbb">
</span></span></span></code></pre></div><p>However this is an effort to fix data quality issues at query time, which is never a good idea.</p>
<p><strong>💡 Lesson 11 💡</strong>: Fixing data quality issues related to nullable columns at query time is a risky approach. Solving them with proper table design and constraints allows you to keep quality data in the tables.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Dealing with <code>NULL</code>s is something to care upfront, during table design, in order to avoid data quality issues downstream!
This is it for the 11 lessons learnt using <code>NULL</code>s, do you have others to share? Feel free to reach me on X/Twitter at @ftisiot or on <a href="https://www.linkedin.com/in/francescotisiot/">Linkedin</a></p><ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://ftisiot.net/" >
    &copy;  ftisiot ideas about tech, food and life 2025 
  </a>
    <div>
<div class="ananke-socials">
  
    
    <a href="https://twitter.com/FTisiot" target="_blank" rel="noopener" class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" aria-label="follow on Twitter——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
    
    <a href="https://github.com/ftisiot" target="_blank" rel="noopener" class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" aria-label="follow on GitHub——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
    
    <a href="https://www.linkedin.com/in/francescotisiot/" target="_blank" rel="noopener" class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" aria-label="follow on LinkedIn——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
    
    <a href="https://www.youtube.com/channel/UCTJ4oA3-T3RdmM2OJ7d8cJg" target="_blank" rel="noopener" class="youtube ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="YouTube link" aria-label="follow on YouTube——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M42.527,41.34c-0.278,0-0.478,0.078-0.6,0.244  c-0.121,0.156-0.18,0.424-0.18,0.796v0.896h1.543V42.38c0-0.372-0.062-0.64-0.185-0.796C42.989,41.418,42.792,41.34,42.527,41.34z   M36.509,41.309c0.234,0,0.417,0.076,0.544,0.23c0.123,0.155,0.185,0.383,0.185,0.682v4.584c0,0.286-0.053,0.487-0.153,0.611  c-0.1,0.127-0.256,0.189-0.47,0.189c-0.148,0-0.287-0.033-0.421-0.096c-0.135-0.062-0.274-0.171-0.415-0.313v-5.531  c0.119-0.122,0.239-0.213,0.36-0.271C36.26,41.335,36.383,41.309,36.509,41.309z M41.748,44.658v1.672  c0,0.468,0.057,0.792,0.17,0.974c0.118,0.181,0.313,0.269,0.592,0.269c0.289,0,0.491-0.076,0.606-0.229  c0.114-0.153,0.175-0.489,0.175-1.013v-0.405h1.795v0.456c0,0.911-0.217,1.596-0.657,2.059c-0.435,0.459-1.089,0.687-1.958,0.687  c-0.781,0-1.398-0.242-1.847-0.731c-0.448-0.486-0.676-1.157-0.676-2.014v-3.986c0-0.768,0.249-1.398,0.742-1.882  c0.493-0.484,1.128-0.727,1.911-0.727c0.799,0,1.413,0.225,1.843,0.674c0.429,0.448,0.642,1.093,0.642,1.935v2.264H41.748z   M38.623,48.495c-0.271,0.336-0.669,0.501-1.187,0.501c-0.343,0-0.646-0.062-0.912-0.192c-0.267-0.129-0.519-0.327-0.746-0.601  v0.681h-1.764V36.852h1.764v3.875c0.237-0.27,0.485-0.478,0.748-0.616c0.267-0.143,0.534-0.212,0.805-0.212  c0.554,0,0.975,0.189,1.265,0.565c0.294,0.379,0.438,0.933,0.438,1.66v4.926C39.034,47.678,38.897,48.159,38.623,48.495z   M30.958,48.884v-0.976c-0.325,0.361-0.658,0.636-1.009,0.822c-0.349,0.191-0.686,0.282-1.014,0.282  c-0.405,0-0.705-0.129-0.913-0.396c-0.201-0.266-0.305-0.658-0.305-1.189v-7.422h1.744v6.809c0,0.211,0.037,0.362,0.107,0.457  c0.077,0.095,0.196,0.141,0.358,0.141c0.128,0,0.292-0.062,0.488-0.188c0.197-0.125,0.375-0.283,0.542-0.475v-6.744h1.744v8.878  H30.958z M24.916,38.6v10.284h-1.968V38.6h-2.034v-1.748h6.036V38.6H24.916z M32.994,32.978c0-0.001,12.08,0.018,13.514,1.45  c1.439,1.435,1.455,8.514,1.455,8.555c0,0-0.012,7.117-1.455,8.556C45.074,52.969,32.994,53,32.994,53s-12.079-0.031-13.516-1.462  c-1.438-1.435-1.441-8.502-1.441-8.556c0-0.041,0.004-7.12,1.441-8.555C20.916,32.996,32.994,32.977,32.994,32.978z M42.52,29.255  h-1.966v-1.08c-0.358,0.397-0.736,0.703-1.13,0.909c-0.392,0.208-0.771,0.312-1.14,0.312c-0.458,0-0.797-0.146-1.027-0.437  c-0.229-0.291-0.345-0.727-0.345-1.311v-8.172h1.962v7.497c0,0.231,0.045,0.399,0.127,0.502c0.08,0.104,0.216,0.156,0.399,0.156  c0.143,0,0.327-0.069,0.548-0.206c0.22-0.137,0.423-0.312,0.605-0.527v-7.422h1.966V29.255z M31.847,27.588  c0.139,0.147,0.339,0.219,0.6,0.219c0.266,0,0.476-0.075,0.634-0.223c0.157-0.152,0.235-0.358,0.235-0.618v-5.327  c0-0.214-0.08-0.387-0.241-0.519c-0.16-0.131-0.37-0.196-0.628-0.196c-0.241,0-0.435,0.065-0.586,0.196  c-0.148,0.132-0.225,0.305-0.225,0.519v5.327C31.636,27.233,31.708,27.439,31.847,27.588z M30.408,19.903  c0.528-0.449,1.241-0.674,2.132-0.674c0.812,0,1.48,0.237,2.001,0.711c0.517,0.473,0.777,1.083,0.777,1.828v5.051  c0,0.836-0.255,1.491-0.762,1.968c-0.513,0.476-1.212,0.714-2.106,0.714c-0.858,0-1.547-0.246-2.064-0.736  c-0.513-0.492-0.772-1.152-0.772-1.983v-5.068C29.613,20.954,29.877,20.351,30.408,19.903z M24.262,16h-2.229l2.634,8.003v5.252  h2.213v-5.5L29.454,16h-2.25l-1.366,5.298h-0.139L24.262,16z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30  S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
    
    <a href="https://hachyderm.io/@ftisiot" target="_blank" rel="noopener" class="mastodon ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Mastodon link" aria-label="follow on Mastodon——Opens in a new window">
      
        <span class="icon"><svg style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="M 61.731833,16.783448 C 60.855064,10.336694 55.17491,5.2562169 48.441526,4.2717554 47.305526,4.1054038 43.001372,3.5 33.030833,3.5 h -0.07446 C 22.983141,3.5 20.843449,4.1054038 19.707449,4.2717554 13.161526,5.2289477 7.1836569,9.7940169 5.7332999,16.317063 c -0.6976035,3.212462 -0.7720515,6.774 -0.6424569,10.041 0.1847407,4.685077 0.2205861,9.361923 0.6507292,14.027923 0.2973693,3.099385 0.8161231,6.174077 1.552377,9.201 1.3786615,5.590462 6.9594998,10.242769 12.4272688,12.140846 5.854077,1.979385 12.149615,2.307923 18.181846,0.949 0.663539,-0.152692 1.319846,-0.33 1.968693,-0.531769 1.464153,-0.460846 3.182,-0.976308 4.444846,-1.881692 0.01731,-0.01269 0.03154,-0.02908 0.04154,-0.048 0.01,-0.01885 0.01562,-0.03977 0.01631,-0.06108 v -4.521385 c -3.08e-4,-0.01992 -0.0051,-0.03954 -0.014,-0.05738 -0.009,-0.01785 -0.02185,-0.03354 -0.03777,-0.04577 -0.01585,-0.01231 -0.03431,-0.02092 -0.05392,-0.02531 -0.01969,-0.0043 -0.04008,-0.0042 -0.05969,2.3e-4 -3.864769,0.913077 -7.825154,1.370769 -11.798615,1.363539 -6.838154,0 -8.677308,-3.209693 -9.204,-4.546 -0.423308,-1.154846 -0.692154,-2.359462 -0.799615,-3.583308 -0.0011,-0.02054 0.0028,-0.04108 0.01115,-0.05992 0.0084,-0.01877 0.02123,-0.03538 0.03731,-0.04839 0.01615,-0.013 0.03515,-0.02208 0.05546,-0.02646 0.02031,-0.0045 0.04138,-0.004 0.06154,0.0012 3.800385,0.906846 7.696154,1.364538 11.605615,1.363538 0.940231,0 1.877693,0 2.818,-0.02454 3.931923,-0.109077 8.076154,-0.308154 11.944693,-1.055385 0.09654,-0.01908 0.193,-0.03546 0.275769,-0.06 6.101923,-1.159 11.908846,-4.796846 12.498923,-14.008846 0.02208,-0.362692 0.07723,-3.798769 0.07723,-4.175077 0.0028,-1.279 0.416384,-9.072846 -0.06069,-13.861538 z m -9.391461,22.98623 H 45.924141 V 24.225525 c 0,-3.272462 -1.378692,-4.941385 -4.182923,-4.941385 -3.082692,0 -4.626769,1.974385 -4.626769,5.874 v 8.508385 H 30.736757 V 25.15814 c 0,-3.899615 -1.546847,-5.874 -4.629539,-5.874 -2.787692,0 -4.180154,1.668923 -4.182923,4.941385 V 39.769678 H 15.513526 V 23.753755 c 0,-3.272461 0.844692,-5.87223 2.534,-7.799384 1.742615,-1.922539 4.028461,-2.909693 6.865769,-2.909693 3.283923,0 5.765538,1.248923 7.419923,3.744231 l 1.596539,2.650692 1.59923,-2.650692 c 1.654385,-2.495308 4.136,-3.744231 7.414462,-3.744231 2.834538,0 5.120308,0.987154 6.868461,2.909693 1.689385,1.925307 2.534,4.525077 2.534,7.799384 z"  style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>
</span>
      
<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;"/>
</svg>
</span></a>
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
